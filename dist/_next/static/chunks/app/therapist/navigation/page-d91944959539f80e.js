(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{255:(e,t,s)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),s(5155),s(7650),s(5744),s(589)},1243:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1366:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},2146:(e,t,s)=>{"use strict";function a(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),s(5262)},3711:(e,t,s)=>{Promise.resolve().then(s.bind(s,6767))},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2596),r=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return i}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return r?new r:new a}function l(e){return r?r.bind(e):a.bind(e)}function i(){return r?r.snapshot():function(e,...t){return e(...t)}}},4186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4516:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5028:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(6645),r=s.n(a)},5742:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]])},5744:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=s(7828)},6645:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let a=s(8229)._(s(7357));function r(e,t){var s;let r={};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,a.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6767:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(5155),r=s(2115),n=s(5695),l=s(8274),i=s(4416);let o=(0,s(9946).A)("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var d=s(1007),c=s(4516),u=s(9420),g=s(1366),h=s(5742),m=s(7930),x=s(4186),b=s(1243),p=s(7168);let f=(0,s(5028).default)(()=>s.e(207).then(s.bind(s,1207)),{loadableGenerated:{webpack:()=>[1207]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"w-full h-full bg-gray-800 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Loading Navigation..."})]})})});function v(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(null),[v,y]=(0,r.useState)({lat:-26.1076,lng:28.0567}),[j,w]=(0,r.useState)({lat:-26.1076,lng:28.0567}),[N,k]=(0,r.useState)(0),[A,M]=(0,r.useState)(0),[C,_]=(0,r.useState)(!0),[S,P]=(0,r.useState)(null),[O,D]=(0,r.useState)(!0),z=(0,r.useRef)(null),B=(0,r.useRef)(null);(0,r.useEffect)(()=>{let a=sessionStorage.getItem("currentSession");if(a){let e=JSON.parse(a);s(e),e.coordinates&&w(e.coordinates)}else e.push("/therapist/dashboard");if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e=>{y({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{console.error("Geolocation error:",e),y({lat:-26.1076,lng:28.0567})},{enableHighAccuracy:!0,timeout:1e4});let e=navigator.geolocation.watchPosition(e=>{let s={lat:e.coords.latitude,lng:e.coords.longitude};y(s),t&&window.google&&L(s,j)},null,{enableHighAccuracy:!0,maximumAge:1e4,timeout:5e3});return()=>navigator.geolocation.clearWatch(e)}},[e,t]);let L=(e,t)=>{if(window.google&&window.google.maps)try{D(!0),z.current||(z.current=new window.google.maps.DirectionsService),B.current||(B.current=new window.google.maps.DirectionsRenderer({suppressMarkers:!1,preserveViewport:!0,polylineOptions:{strokeColor:"#10B981",strokeWeight:6,strokeOpacity:.8}}));let s={origin:new window.google.maps.LatLng(e.lat,e.lng),destination:new window.google.maps.LatLng(t.lat,t.lng),travelMode:window.google.maps.TravelMode.DRIVING};z.current.route(s,(s,a)=>{if(D(!1),a===window.google.maps.DirectionsStatus.OK){let t=s.routes[0].legs[0],a=t.distance.value/1e3,r=t.duration.value/60;if(M(parseFloat(a.toFixed(2))),k(parseFloat(r.toFixed(1))),P({distance:a,duration:r,polyline:s}),B.current){let t=document.getElementById("navigation-map");if(t){let a=new window.google.maps.Map(t,{zoom:13,center:e,disableDefaultUI:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}]});B.current.setMap(a),B.current.setDirections(s)}}}else console.error("Directions request failed:",a),E(e,t)})}catch(s){console.error("Error calculating route:",s),D(!1),E(e,t)}},E=(e,t)=>{let s=(t.lat-e.lat)*Math.PI/180,a=(t.lng-e.lng)*Math.PI/180,r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2),n=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371*1.3,l=n/40*60;M(parseFloat(n.toFixed(2))),k(parseFloat(l.toFixed(1)))};return((0,r.useEffect)(()=>{t&&t.coordinates&&window.google&&(w(t.coordinates),L(v,t.coordinates))},[t,v]),t)?(0,a.jsxs)("div",{className:"min-h-screen bg-[#1a2a3a] text-white",children:[(0,a.jsx)("div",{className:"bg-[#2d3e50] p-4 border-b border-[#3a506b]",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(p.$,{variant:"ghost",size:"icon",onClick:()=>e.push("/therapist/dashboard"),className:"text-white hover:bg-[#3a506b]",children:(0,a.jsx)(i.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"Navigation"}),(0,a.jsx)("p",{className:"text-[#71CBD1] text-sm",children:"En route to session"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-[#71CBD1]",children:[O?"...":N.toFixed(1)," min"]}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:O?"Calculating...":"".concat(A.toFixed(2)," km")})]})]})}),(0,a.jsxs)("div",{className:"flex-1 relative h-96 bg-[#2d3e50]",children:[(0,a.jsx)(f,{center:v,zoom:13,therapists:[],className:"w-full h-full"}),(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-[#1a2a3a]/90 backdrop-blur-sm rounded-xl p-3 border border-[#3a506b]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[#71CBD1]",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Navigation Active"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Following route to client"})]}),!O&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 bg-[#1a2a3a]/90 backdrop-blur-sm rounded-xl p-3 border border-[#3a506b]",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-2",children:[(0,a.jsx)("span",{children:"You"}),(0,a.jsx)("span",{children:t.clientName})]}),(0,a.jsx)("div",{className:"w-full bg-[#3a506b] rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#71CBD1] to-emerald-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(Math.min(100,((null==S?void 0:S.distance)||0)/((null==S?void 0:S.distance)||1)*100),"%")}})})]})]}),(0,a.jsx)("div",{className:"bg-[#2d3e50] m-4 rounded-2xl border border-[#3a506b] overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-[#71CBD1] to-emerald-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:t.clientName}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:t.service})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-[#71CBD1] font-bold",children:["R",t.price]}),(0,a.jsxs)("div",{className:"text-gray-400 text-xs",children:[t.duration,"min"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 mb-4",children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm flex-1",children:t.location})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(p.$,{onClick:()=>{window.open("tel:+27123456789","_blank")},className:"bg-[#3a506b] hover:bg-[#4a6180] text-white rounded-xl py-3 border border-[#4a6180]",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Call"]}),(0,a.jsxs)(p.$,{onClick:()=>{e.push("/therapist/inbox")},className:"bg-[#3a506b] hover:bg-[#4a6180] text-white rounded-xl py-3 border border-[#4a6180]",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Message"]})]}),(0,a.jsxs)(p.$,{onClick:()=>{if(null==t?void 0:t.coordinates){let e="https://www.google.com/maps/dir/?api=1&destination=".concat(t.coordinates.lat,",").concat(t.coordinates.lng,"&travelmode=driving");window.open(e,"_blank")}},variant:"outline",className:"w-full mt-3 bg-transparent border-[#71CBD1] text-[#71CBD1] hover:bg-[#71CBD1] hover:text-[#1a2a3a] rounded-xl py-3",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Open in Google Maps"]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[C?(0,a.jsxs)(p.$,{onClick:()=>{if(_(!1),t){let e={...t,status:"arrived"};sessionStorage.setItem("currentSession",JSON.stringify(e))}},disabled:O,className:"w-full bg-[#71CBD1] hover:bg-[#5bb5c1] disabled:opacity-50 text-[#1a2a3a] font-semibold rounded-2xl py-4 text-lg shadow-lg",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 mr-2"}),O?"Calculating Route...":"I've Arrived"]}):(0,a.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"text-center space-y-3",children:[(0,a.jsxs)("div",{className:"bg-green-500/20 border border-green-500/30 rounded-2xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-center text-green-400 mb-2",children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Session Ready to Start"})]}),(0,a.jsxs)("p",{className:"text-gray-300 text-sm",children:["You've arrived at ",t.clientName,"'s location"]})]}),(0,a.jsx)(p.$,{onClick:()=>e.push("/therapist/session/".concat(t.id)),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white rounded-2xl py-4 text-lg font-semibold shadow-lg",children:"Start Massage Session"})]}),(0,a.jsxs)(p.$,{variant:"outline",className:"w-full border-red-500/50 text-red-400 hover:bg-red-500/10 hover:text-red-300 rounded-2xl py-3",children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Emergency Assistance"]})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-[#1a2a3a] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#71CBD1] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading navigation..."})]})})}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(5155);s(2115);var r=s(9708),n=s(2085),l=s(3999);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:n,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,l.cn)(i({variant:s,size:n,className:t})),...d})}},7357:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=s(5155),r=s(2115),n=s(2146);function l(e){return{default:e&&"default"in e?e.default:e}}s(255);let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},s=(0,r.lazy)(()=>t.loader().then(l)),o=t.loading;function d(e){let l=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,d=i?r.Suspense:r.Fragment,c=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(d,{...i?{fallback:l}:{},children:c})}return d.displayName="LoadableComponent",d}},7828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,s(4054).createAsyncLocalStorage)()},7930:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},9420:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[160,274,441,684,358],()=>t(3711)),_N_E=e.O()}]);